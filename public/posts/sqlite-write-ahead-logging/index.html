<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>SQLite Write Ahead Logging | LearnSQLite</title>
<meta name="keywords" content="">
<meta name="description" content="Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks

By default, SQLite uses a rollback journal mode to ensure atomicity, consistency, isolation, and durability (ACID) compliance. However, SQLite offers an alternative journaling mode called Write-Ahead Logging (WAL), which dramatically improves write performance and allows concurrent read and write operations.
In this post, we’ll dive deep into SQLite’s WAL mode, explaining how it works, when to use it, and its pros and cons. We’ll also explore benchmarks to see how it performs in different scenarios.">
<meta name="author" content="panikinator">
<link rel="canonical" href="http://localhost:1313/posts/sqlite-write-ahead-logging/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.682361e61c3c86eb6defdb7d48994d370670c932733f961d1bff6791ec36466d.css" integrity="sha256-aCNh5hw8hutt79t9SJlNNwZwyTJzP5YdG/9nkew2Rm0=" rel="preload stylesheet" as="style">
<script defer data-domain="learnsqlite.dev" src="https://plausible.0393939.xyz/js/script.js"></script>
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/sqlite-write-ahead-logging/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="SQLite Write Ahead Logging" />
<meta property="og:description" content="Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks

By default, SQLite uses a rollback journal mode to ensure atomicity, consistency, isolation, and durability (ACID) compliance. However, SQLite offers an alternative journaling mode called Write-Ahead Logging (WAL), which dramatically improves write performance and allows concurrent read and write operations.
In this post, we’ll dive deep into SQLite’s WAL mode, explaining how it works, when to use it, and its pros and cons. We’ll also explore benchmarks to see how it performs in different scenarios." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/posts/sqlite-write-ahead-logging/" />
<meta property="og:image" content="http://localhost:1313/full_logo.png" />
<meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-09-12T16:09:02+05:30" />
<meta property="article:modified_time" content="2024-09-12T16:09:02+05:30" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/full_logo.png" />
<meta name="twitter:title" content="SQLite Write Ahead Logging"/>
<meta name="twitter:description" content="Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks

By default, SQLite uses a rollback journal mode to ensure atomicity, consistency, isolation, and durability (ACID) compliance. However, SQLite offers an alternative journaling mode called Write-Ahead Logging (WAL), which dramatically improves write performance and allows concurrent read and write operations.
In this post, we’ll dive deep into SQLite’s WAL mode, explaining how it works, when to use it, and its pros and cons. We’ll also explore benchmarks to see how it performs in different scenarios."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "SQLite Write Ahead Logging",
      "item": "http://localhost:1313/posts/sqlite-write-ahead-logging/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "SQLite Write Ahead Logging",
  "name": "SQLite Write Ahead Logging",
  "description": "Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks By default, SQLite uses a rollback journal mode to ensure atomicity, consistency, isolation, and durability (ACID) compliance. However, SQLite offers an alternative journaling mode called Write-Ahead Logging (WAL), which dramatically improves write performance and allows concurrent read and write operations.\nIn this post, we’ll dive deep into SQLite’s WAL mode, explaining how it works, when to use it, and its pros and cons. We’ll also explore benchmarks to see how it performs in different scenarios.\n",
  "keywords": [
    
  ],
  "articleBody": "Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks By default, SQLite uses a rollback journal mode to ensure atomicity, consistency, isolation, and durability (ACID) compliance. However, SQLite offers an alternative journaling mode called Write-Ahead Logging (WAL), which dramatically improves write performance and allows concurrent read and write operations.\nIn this post, we’ll dive deep into SQLite’s WAL mode, explaining how it works, when to use it, and its pros and cons. We’ll also explore benchmarks to see how it performs in different scenarios.\nWhat is SQLite Write-Ahead Logging (WAL)? The Write-Ahead Logging (WAL) mode in SQLite is an advanced journaling mechanism designed to improve performance and concurrency. In the default rollback journal mode, every write transaction locks the entire database, preventing concurrent reads and writes. WAL mode, on the other hand, writes changes to a separate WAL file, allowing reads and writes to occur simultaneously.\nIn WAL mode, the database works as follows:\nWrite Operations: Instead of writing directly to the main database file, changes are written to a separate WAL file.\nCheckpointing: When the WAL file grows beyond a certain size (default: 1,000 pages), SQLite merges changes from the WAL file back into the main database file in a process called “checkpointing.”\nRead Operations: Readers continue accessing the original database file while changes accumulate in the WAL file with minimal performance degradation compared to rollback mode.\nThis separation between readers and writers removes the bottleneck caused by exclusive locking, improving write performance and enabling more parallelism.\nHow to Enable WAL Mode in SQLite Activating WAL mode in SQLite is straightforward. You can enable it for a specific database by running the following SQL command:\nPRAGMA journal_mode = WAL; This command switches the database to WAL mode and creates a WAL file next to the main database file.\nYou can also check the current journaling mode with:\nPRAGMA journal_mode; To return to the default rollback journal mode, you can execute:\nPRAGMA journal_mode = DELETE; How Does WAL Mode Work? WAL mode fundamentally changes how SQLite manages database changes. Instead of writing directly to the database file, SQLite writes transactions into the WAL file. Let’s break down the key components of WAL mode:\nWAL File Temporary File: The WAL file stores changes until they are merged back into the main database file during a checkpoint.\nEfficient Writes: Since SQLite appends data to the WAL file, the write process is faster, avoiding costly file-locking operations that occur in rollback journal mode.\nCheckpointing Periodic Merging: During a checkpoint, SQLite applies the changes from the WAL file to the main database. Checkpointing can happen automatically or manually.\nOptimization: You can tune when checkpointing occurs (e.g., by adjusting the size of the WAL file) to balance performance and durability.\nReaders and Writers Concurrent Reads/Writes: Unlike rollback journal mode, where writes block reads, WAL mode allows multiple readers and one writer to work concurrently.\nRead Consistency: Readers in WAL mode access the unchanged database file, ensuring they get a consistent view of the data.\nWhen to Use WAL Mode WAL mode offers significant benefits in various scenarios, but it’s not suitable for every use case. Here are some ideal situations where WAL mode excels:\nHigh Write Performance WAL mode significantly improves write performance by avoiding the need to lock the entire database during each transaction. If your application is write-heavy, WAL mode is a good fit.\nConcurrent Reads and Writes In applications that require concurrent reads and writes, such as web applications or real-time data processing systems, WAL mode allows for more efficient concurrency without sacrificing read performance.\nEmbedded Systems and Mobile Applications Many mobile apps and embedded systems (e.g., IoT devices) use SQLite for data storage. These applications often benefit from WAL mode’s better concurrency and faster writes, especially when dealing with high-frequency data collection.\nLong-Running Reads In some applications, you may have long-running read transactions that block other operations. WAL mode allows long-running reads to continue without affecting write performance.\nWhen Not to Use WAL Mode While WAL mode offers great advantages, there are some scenarios where it may not be the best option:\nLimited Disk Space WAL mode requires additional disk space because it creates a separate WAL file for write transactions. If your application is running in an environment with limited disk space, such as embedded devices, this might be a concern. However, the WAL file is truncated periodically, so this is usually a manageable issue.\nSingle-Threaded Environments If your application is single-threaded and doesn’t require concurrent reads and writes, the performance improvements of WAL mode may be negligible. In such cases, the default rollback journal mode may suffice.\nExternal Storage (e.g., Network Filesystems) WAL mode might not work efficiently or not at all on network-mounted or cloud-based filesystems such as SMB or NFS. SQLite recommends caution when using WAL mode in environments where the file system might not provide fast access or low-latency storage.\nFrequent Checkpoints WAL mode works best when checkpoints are infrequent, allowing the WAL file to grow before merging changes into the main database. Applications that trigger frequent checkpoints (due to low checkpoint thresholds or explicit requests) may see diminished benefits, as frequent disk I/O will negate WAL’s write performance gains.\nPerformance Benchmarks The benchmarks were performed on my laptops, the figures are only meant to be seen relatively. I used the following python script to benchmark the database\nimport concurrent.futures import os import random import sqlite3 import time def create_table(conn): cursor = conn.cursor() cursor.execute( \"\"\"CREATE TABLE IF NOT EXISTS test_table (id INTEGER PRIMARY KEY, value TEXT)\"\"\" ) conn.commit() def insert_data(db_file, num_records): conn = sqlite3.connect(db_file) cursor = conn.cursor() for i in range(num_records): cursor.execute(\"INSERT INTO test_table (value) VALUES (?)\", (f\"Value {i}\",)) conn.commit() conn.close() def read_data(db_file, num_reads): conn = sqlite3.connect(db_file) cursor = conn.cursor() for _ in range(num_reads): cursor.execute( \"SELECT * FROM test_table WHERE id = ?\", (random.randint(1, 10000),) ) cursor.fetchone() conn.close() def concurrent_operations( db_file, num_writers, num_readers, records_per_writer, reads_per_reader ): with concurrent.futures.ThreadPoolExecutor( max_workers=num_writers + num_readers ) as executor: # Start write operations write_futures = [ executor.submit(insert_data, db_file, records_per_writer) for _ in range(num_writers) ] # Start read operations read_futures = [ executor.submit(read_data, db_file, reads_per_reader) for _ in range(num_readers) ] # Wait for all operations to complete concurrent.futures.wait(write_futures + read_futures) def run_benchmark( db_file, enable_wal, num_writers, num_readers, records_per_writer, reads_per_reader ): if os.path.exists(db_file): os.remove(db_file) conn = sqlite3.connect(db_file) if enable_wal: conn.execute(\"PRAGMA journal_mode=WAL\") create_table(conn) conn.close() start_time = time.time() concurrent_operations( db_file, num_writers, num_readers, records_per_writer, reads_per_reader ) end_time = time.time() total_time = end_time - start_time total_writes = num_writers * records_per_writer total_reads = num_readers * reads_per_reader return total_time, total_writes / total_time, total_reads / total_time def main(): num_writers = 12 num_readers = 40 records_per_writer = 2000 reads_per_reader = 1000 # Run benchmark without WAL time_no_wal, writes_no_wal, reads_no_wal = run_benchmark( \"test_no_wal.db\", False, num_writers, num_readers, records_per_writer, reads_per_reader, ) # Run benchmark with WAL time_wal, writes_wal, reads_wal = run_benchmark( \"test_wal.db\", True, num_writers, num_readers, records_per_writer, reads_per_reader, ) print(f\"Without WAL:\") print(f\" Total time: {time_no_wal:.2f} seconds\") print(f\" Writes per second: {writes_no_wal:.2f}\") print(f\" Reads per second: {reads_no_wal:.2f}\") print(f\"\\nWith WAL:\") print(f\" Total time: {time_wal:.2f} seconds\") print(f\" Writes per second: {writes_wal:.2f}\") print(f\" Reads per second: {reads_wal:.2f}\") print(f\"\\nWAL vs No WAL comparison:\") print(f\" Total time improvement: {(time_no_wal / time_wal - 1) * 100:.2f}%\") print(f\" Write speed improvement: {(writes_wal / writes_no_wal - 1) * 100:.2f}%\") print(f\" Read speed improvement: {(reads_wal / reads_no_wal - 1) * 100:.2f}%\") if __name__ == \"__main__\": main() And here are the results:\nMode Writes/s Reads/s Normal 8408 14014 WAL 9768 16281 Conclusion: If you run a non fault tolerant app then continue using the default otherwise WAL is a no brainer for most people.\n",
  "wordCount" : "1250",
  "inLanguage": "en",
  "image": "http://localhost:1313/full_logo.png","datePublished": "2024-09-12T16:09:02+05:30",
  "dateModified": "2024-09-12T16:09:02+05:30",
  "author":{
    "@type": "Person",
    "name": "panikinator"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/sqlite-write-ahead-logging/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "LearnSQLite",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="LearnSQLite (Alt + H)">
                <img src="http://localhost:1313/logo.webp" alt="" aria-label="logo"
                    height="30">LearnSQLite</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      SQLite Write Ahead Logging
    </h1>
    <div class="post-meta"><span title='2024-09-12 16:09:02 +0530 IST'>September 12, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;panikinator

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#mastering-sqlite-write-ahead-logging-wal-use-cases-best-practices-and-performance-benchmarks" aria-label="Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks">Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks</a><ul>
                        
                <li>
                    <a href="#what-is-sqlite-write-ahead-logging-wal" aria-label="What is SQLite Write-Ahead Logging (WAL)?">What is SQLite Write-Ahead Logging (WAL)?</a></li>
                <li>
                    <a href="#how-to-enable-wal-mode-in-sqlite" aria-label="How to Enable WAL Mode in SQLite">How to Enable WAL Mode in SQLite</a></li>
                <li>
                    <a href="#how-does-wal-mode-work" aria-label="How Does WAL Mode Work?">How Does WAL Mode Work?</a></li>
                <li>
                    <a href="#when-to-use-wal-mode" aria-label="When to Use WAL Mode">When to Use WAL Mode</a></li>
                <li>
                    <a href="#when-not-to-use-wal-mode" aria-label="When Not to Use WAL Mode">When Not to Use WAL Mode</a></li>
                <li>
                    <a href="#performance-benchmarks" aria-label="Performance Benchmarks">Performance Benchmarks</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion:">Conclusion:</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="mastering-sqlite-write-ahead-logging-wal-use-cases-best-practices-and-performance-benchmarks">Mastering SQLite Write-Ahead Logging (WAL): Use Cases, Best Practices, and Performance Benchmarks<a hidden class="anchor" aria-hidden="true" href="#mastering-sqlite-write-ahead-logging-wal-use-cases-best-practices-and-performance-benchmarks">#</a></h1>
<hr>
<p>By default, SQLite uses a rollback journal mode to ensure atomicity, consistency, isolation, and durability (ACID) compliance. However, SQLite offers an alternative journaling mode called Write-Ahead Logging (WAL), which dramatically improves write performance and allows concurrent read and write operations.</p>
<p>In this post, we’ll dive deep into SQLite’s WAL mode, explaining how it works, when to use it, and its pros and cons. We’ll also explore benchmarks to see how it performs in different scenarios.</p>
<hr>
<h2 id="what-is-sqlite-write-ahead-logging-wal">What is SQLite Write-Ahead Logging (WAL)?<a hidden class="anchor" aria-hidden="true" href="#what-is-sqlite-write-ahead-logging-wal">#</a></h2>
<p>The Write-Ahead Logging (WAL) mode in SQLite is an advanced journaling mechanism designed to improve performance and concurrency. In the default rollback journal mode, every write transaction locks the entire database, preventing concurrent reads and writes. WAL mode, on the other hand, writes changes to a separate WAL file, allowing reads and writes to occur simultaneously.</p>
<p>In WAL mode, the database works as follows:</p>
<ul>
<li>
<p>Write Operations: Instead of writing directly to the main database file, changes are written to a separate WAL file.</p>
</li>
<li>
<p>Checkpointing: When the WAL file grows beyond a certain size (default: 1,000 pages), SQLite merges changes from the WAL file back into the main database file in a process called &ldquo;checkpointing.&rdquo;</p>
</li>
<li>
<p>Read Operations: Readers continue accessing the original database file while changes accumulate in the WAL file with minimal performance degradation compared to rollback mode.</p>
</li>
</ul>
<p>This separation between readers and writers removes the bottleneck caused by exclusive locking, improving write performance and enabling more parallelism.</p>
<hr>
<h2 id="how-to-enable-wal-mode-in-sqlite">How to Enable WAL Mode in SQLite<a hidden class="anchor" aria-hidden="true" href="#how-to-enable-wal-mode-in-sqlite">#</a></h2>
<p>Activating WAL mode in SQLite is straightforward. You can enable it for a specific database by running the following SQL command:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="n">PRAGMA</span><span class="w"> </span><span class="n">journal_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WAL</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>This command switches the database to WAL mode and creates a WAL file next to the main database file.</p>
<p>You can also check the current journaling mode with:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="n">PRAGMA</span><span class="w"> </span><span class="n">journal_mode</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>To return to the default rollback journal mode, you can execute:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-SQL" data-lang="SQL"><span class="line"><span class="cl"><span class="n">PRAGMA</span><span class="w"> </span><span class="n">journal_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">DELETE</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><hr>
<h2 id="how-does-wal-mode-work">How Does WAL Mode Work?<a hidden class="anchor" aria-hidden="true" href="#how-does-wal-mode-work">#</a></h2>
<p>WAL mode fundamentally changes how SQLite manages database changes. Instead of writing directly to the database file, SQLite writes transactions into the WAL file. Let’s break down the key components of WAL mode:</p>
<ol>
<li>WAL File</li>
</ol>
<p>Temporary File: The WAL file stores changes until they are merged back into the main database file during a checkpoint.</p>
<p>Efficient Writes: Since SQLite appends data to the WAL file, the write process is faster, avoiding costly file-locking operations that occur in rollback journal mode.</p>
<ol start="2">
<li>Checkpointing</li>
</ol>
<p>Periodic Merging: During a checkpoint, SQLite applies the changes from the WAL file to the main database. Checkpointing can happen automatically or manually.</p>
<p>Optimization: You can tune when checkpointing occurs (e.g., by adjusting the size of the WAL file) to balance performance and durability.</p>
<ol start="3">
<li>Readers and Writers</li>
</ol>
<p>Concurrent Reads/Writes: Unlike rollback journal mode, where writes block reads, WAL mode allows multiple readers and one writer to work concurrently.</p>
<p>Read Consistency: Readers in WAL mode access the unchanged database file, ensuring they get a consistent view of the data.</p>
<hr>
<h2 id="when-to-use-wal-mode">When to Use WAL Mode<a hidden class="anchor" aria-hidden="true" href="#when-to-use-wal-mode">#</a></h2>
<p>WAL mode offers significant benefits in various scenarios, but it’s not suitable for every use case. Here are some ideal situations where WAL mode excels:</p>
<ol>
<li>High Write Performance</li>
</ol>
<p>WAL mode significantly improves write performance by avoiding the need to lock the entire database during each transaction. If your application is write-heavy, WAL mode is a good fit.</p>
<ol start="2">
<li>Concurrent Reads and Writes</li>
</ol>
<p>In applications that require concurrent reads and writes, such as web applications or real-time data processing systems, WAL mode allows for more efficient concurrency without sacrificing read performance.</p>
<ol start="3">
<li>Embedded Systems and Mobile Applications</li>
</ol>
<p>Many mobile apps and embedded systems (e.g., IoT devices) use SQLite for data storage. These applications often benefit from WAL mode&rsquo;s better concurrency and faster writes, especially when dealing with high-frequency data collection.</p>
<ol start="4">
<li>Long-Running Reads</li>
</ol>
<p>In some applications, you may have long-running read transactions that block other operations. WAL mode allows long-running reads to continue without affecting write performance.</p>
<hr>
<h2 id="when-not-to-use-wal-mode">When Not to Use WAL Mode<a hidden class="anchor" aria-hidden="true" href="#when-not-to-use-wal-mode">#</a></h2>
<p>While WAL mode offers great advantages, there are some scenarios where it may not be the best option:</p>
<ol>
<li>Limited Disk Space</li>
</ol>
<p>WAL mode requires additional disk space because it creates a separate WAL file for write transactions. If your application is running in an environment with limited disk space, such as embedded devices, this might be a concern. However, the WAL file is truncated periodically, so this is usually a manageable issue.</p>
<ol start="2">
<li>Single-Threaded Environments</li>
</ol>
<p>If your application is single-threaded and doesn’t require concurrent reads and writes, the performance improvements of WAL mode may be negligible. In such cases, the default rollback journal mode may suffice.</p>
<ol start="3">
<li>External Storage (e.g., Network Filesystems)</li>
</ol>
<p>WAL mode might not work efficiently or not at all on network-mounted or cloud-based filesystems such as SMB or NFS. SQLite recommends caution when using WAL mode in environments where the file system might not provide fast access or low-latency storage.</p>
<ol start="4">
<li>Frequent Checkpoints</li>
</ol>
<p>WAL mode works best when checkpoints are infrequent, allowing the WAL file to grow before merging changes into the main database. Applications that trigger frequent checkpoints (due to low checkpoint thresholds or explicit requests) may see diminished benefits, as frequent disk I/O will negate WAL’s write performance gains.</p>
<hr>
<h2 id="performance-benchmarks">Performance Benchmarks<a hidden class="anchor" aria-hidden="true" href="#performance-benchmarks">#</a></h2>
<p>The benchmarks were performed on my laptops, the figures are only meant to be seen relatively.
I used the following python script to benchmark the database</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">concurrent.futures</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">random</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">sqlite3</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">create_table</span><span class="p">(</span><span class="n">conn</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;CREATE TABLE IF NOT EXISTS test_table
</span></span></span><span class="line"><span class="cl"><span class="s2">                      (id INTEGER PRIMARY KEY, value TEXT)&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">insert_data</span><span class="p">(</span><span class="n">db_file</span><span class="p">,</span> <span class="n">num_records</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_records</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;INSERT INTO test_table (value) VALUES (?)&#34;</span><span class="p">,</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Value </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,))</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">read_data</span><span class="p">(</span><span class="n">db_file</span><span class="p">,</span> <span class="n">num_reads</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_reads</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;SELECT * FROM test_table WHERE id = ?&#34;</span><span class="p">,</span> <span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">),)</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">concurrent_operations</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">db_file</span><span class="p">,</span> <span class="n">num_writers</span><span class="p">,</span> <span class="n">num_readers</span><span class="p">,</span> <span class="n">records_per_writer</span><span class="p">,</span> <span class="n">reads_per_reader</span>
</span></span><span class="line"><span class="cl"><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">max_workers</span><span class="o">=</span><span class="n">num_writers</span> <span class="o">+</span> <span class="n">num_readers</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># Start write operations</span>
</span></span><span class="line"><span class="cl">        <span class="n">write_futures</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">insert_data</span><span class="p">,</span> <span class="n">db_file</span><span class="p">,</span> <span class="n">records_per_writer</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_writers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># Start read operations</span>
</span></span><span class="line"><span class="cl">        <span class="n">read_futures</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">read_data</span><span class="p">,</span> <span class="n">db_file</span><span class="p">,</span> <span class="n">reads_per_reader</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_readers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># Wait for all operations to complete</span>
</span></span><span class="line"><span class="cl">        <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">write_futures</span> <span class="o">+</span> <span class="n">read_futures</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">run_benchmark</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">db_file</span><span class="p">,</span> <span class="n">enable_wal</span><span class="p">,</span> <span class="n">num_writers</span><span class="p">,</span> <span class="n">num_readers</span><span class="p">,</span> <span class="n">records_per_writer</span><span class="p">,</span> <span class="n">reads_per_reader</span>
</span></span><span class="line"><span class="cl"><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">db_file</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">db_file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">db_file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">enable_wal</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&#34;PRAGMA journal_mode=WAL&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">create_table</span><span class="p">(</span><span class="n">conn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">concurrent_operations</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">db_file</span><span class="p">,</span> <span class="n">num_writers</span><span class="p">,</span> <span class="n">num_readers</span><span class="p">,</span> <span class="n">records_per_writer</span><span class="p">,</span> <span class="n">reads_per_reader</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">end_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">total_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
</span></span><span class="line"><span class="cl">    <span class="n">total_writes</span> <span class="o">=</span> <span class="n">num_writers</span> <span class="o">*</span> <span class="n">records_per_writer</span>
</span></span><span class="line"><span class="cl">    <span class="n">total_reads</span> <span class="o">=</span> <span class="n">num_readers</span> <span class="o">*</span> <span class="n">reads_per_reader</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">total_time</span><span class="p">,</span> <span class="n">total_writes</span> <span class="o">/</span> <span class="n">total_time</span><span class="p">,</span> <span class="n">total_reads</span> <span class="o">/</span> <span class="n">total_time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">num_writers</span> <span class="o">=</span> <span class="mi">12</span>
</span></span><span class="line"><span class="cl">    <span class="n">num_readers</span> <span class="o">=</span> <span class="mi">40</span>
</span></span><span class="line"><span class="cl">    <span class="n">records_per_writer</span> <span class="o">=</span> <span class="mi">2000</span>
</span></span><span class="line"><span class="cl">    <span class="n">reads_per_reader</span> <span class="o">=</span> <span class="mi">1000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Run benchmark without WAL</span>
</span></span><span class="line"><span class="cl">    <span class="n">time_no_wal</span><span class="p">,</span> <span class="n">writes_no_wal</span><span class="p">,</span> <span class="n">reads_no_wal</span> <span class="o">=</span> <span class="n">run_benchmark</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;test_no_wal.db&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="kc">False</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">num_writers</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">num_readers</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">records_per_writer</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">reads_per_reader</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># Run benchmark with WAL</span>
</span></span><span class="line"><span class="cl">    <span class="n">time_wal</span><span class="p">,</span> <span class="n">writes_wal</span><span class="p">,</span> <span class="n">reads_wal</span> <span class="o">=</span> <span class="n">run_benchmark</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;test_wal.db&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">num_writers</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">num_readers</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">records_per_writer</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">reads_per_reader</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Without WAL:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Total time: </span><span class="si">{</span><span class="n">time_no_wal</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> seconds&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Writes per second: </span><span class="si">{</span><span class="n">writes_no_wal</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Reads per second: </span><span class="si">{</span><span class="n">reads_no_wal</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">With WAL:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Total time: </span><span class="si">{</span><span class="n">time_wal</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> seconds&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Writes per second: </span><span class="si">{</span><span class="n">writes_wal</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Reads per second: </span><span class="si">{</span><span class="n">reads_wal</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">WAL vs No WAL comparison:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Total time improvement: </span><span class="si">{</span><span class="p">(</span><span class="n">time_no_wal</span> <span class="o">/</span> <span class="n">time_wal</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Write speed improvement: </span><span class="si">{</span><span class="p">(</span><span class="n">writes_wal</span> <span class="o">/</span> <span class="n">writes_no_wal</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  Read speed improvement: </span><span class="si">{</span><span class="p">(</span><span class="n">reads_wal</span> <span class="o">/</span> <span class="n">reads_no_wal</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">main</span><span class="p">()</span>
</span></span></code></pre></div><p>And here are the results:</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Mode</th>
          <th style="text-align: left">Writes/s</th>
          <th style="text-align: left">Reads/s</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Normal</td>
          <td style="text-align: left">8408</td>
          <td style="text-align: left">14014</td>
      </tr>
      <tr>
          <td style="text-align: left">WAL</td>
          <td style="text-align: left">9768</td>
          <td style="text-align: left">16281</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="conclusion">Conclusion:<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>If you run a non fault tolerant app then continue using the default otherwise WAL is a no brainer for most people.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SQLite Write Ahead Logging on x"
            href="https://x.com/intent/tweet/?text=SQLite%20Write%20Ahead%20Logging&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f&amp;hashtags=">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SQLite Write Ahead Logging on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f&amp;title=SQLite%20Write%20Ahead%20Logging&amp;summary=SQLite%20Write%20Ahead%20Logging&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SQLite Write Ahead Logging on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f&title=SQLite%20Write%20Ahead%20Logging">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SQLite Write Ahead Logging on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SQLite Write Ahead Logging on whatsapp"
            href="https://api.whatsapp.com/send?text=SQLite%20Write%20Ahead%20Logging%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SQLite Write Ahead Logging on telegram"
            href="https://telegram.me/share/url?text=SQLite%20Write%20Ahead%20Logging&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share SQLite Write Ahead Logging on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=SQLite%20Write%20Ahead%20Logging&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fsqlite-write-ahead-logging%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
<div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "learnsqlite" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">LearnSQLite</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
